
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Developers Guide &#8212; HydroMT  documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.59c74d8c95b765a7fd995ac71d459ebe.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-deltares.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Roadmap" href="roadmap.html" />
    <link rel="prev" title="What’s new" href="../changelog.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">HydroMT</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../getting_started/intro.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/intro.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/api_index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="intro.html">
  Developments
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../plugins.html">
  Plugins
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://deltares.nl/en/" rel="noopener" target="_blank" title="Deltares"><img src="../_static/deltares-white.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../changelog.html">
   What’s new
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Developers Guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="team.html">
   Contributors
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rights">
   Rights
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#issue-conventions">
   Issue Conventions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#design-principles">
   Design Principles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-conventions">
   Git Conventions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#code-conventions">
   Code Conventions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#development-environment">
   Development Environment
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#initial-setup">
     Initial Setup
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-tests">
     Running the tests
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-code-format-checks">
     Running code format checks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-release">
     Creating a release
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="developers-guide">
<span id="contributing"></span><h1>Developers Guide<a class="headerlink" href="#developers-guide" title="Permalink to this headline">¶</a></h1>
<p>Welcome to the HydroMT project. All contributions, bug reports, bug fixes,
documentation improvements, enhancements, and ideas are welcome. Here’s how we work.</p>
<section id="rights">
<h2>Rights<a class="headerlink" href="#rights" title="Permalink to this headline">¶</a></h2>
<p>The MIT license (see LICENSE.txt) applies to all contributions.</p>
</section>
<section id="issue-conventions">
<h2>Issue Conventions<a class="headerlink" href="#issue-conventions" title="Permalink to this headline">¶</a></h2>
<p>The HydroMT issue tracker is for actionable issues.</p>
<p>HydroMT is a relatively new project and highly active. We have bugs, both
known and unknown.</p>
<p>Please search existing issues, open and closed, before creating a new one.</p>
<p>Please provide these details as well as tracebacks and relevant logs. Short scripts and
datasets demonstrating the issue are especially helpful!</p>
</section>
<section id="design-principles">
<h2>Design Principles<a class="headerlink" href="#design-principles" title="Permalink to this headline">¶</a></h2>
<p>HydroMT contains methods to build and analyze models in the hydrology sphere. We try
to build a modular framework in which data can be interchanged in workflows and
method and workflows can be reused between models. To achieve this we designed a
GeneralDataApapter to work with any type of regural gridded data in Xarray and vector
data in geopandas. An abstract class for models is designed to create a unifor API for
different models.</p>
<ul class="simple">
<li><p>I/O from the filesystem is achieved trough geopandas for vector data, methods in
open_raterio for gdal raster data and xarray for netcdf data.</p></li>
<li><p>Flow direction data is parsed to the pyflwdir.FlwdirRaster object.</p></li>
</ul>
</section>
<section id="git-conventions">
<h2>Git Conventions<a class="headerlink" href="#git-conventions" title="Permalink to this headline">¶</a></h2>
<p>First of all, if git is new to you, here are some great resources for learning Git:</p>
<ul class="simple">
<li><p>the GitHub <a class="reference external" href="https://docs.github.com/en/github/getting-started-with-github/getting-started-with-git">help pages</a>.</p></li>
<li><p>the NumPy’s <a class="reference external" href="http://docs.scipy.org/doc/numpy/dev/index.html">documentation</a>.</p></li>
</ul>
<p>The code is hosted on GitHub. To contribute you will need to sign up for a free
GitHub account. We follow the <a class="reference external" href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/github-flow">GitHub workflow</a>
to allow many people to work together on the project.</p>
<p>After discussing a new proposal or implementation in the issue tracker, you can start
working on the code. You write your code locally in a new branch HydroMT repo or in a
branch of a fork. Once you’re done with your first iteration, you commit your code and
push to your HydroMT repository.</p>
<p>To create a new branch after you’ve downloaded the latest changes in the project:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git pull
<span class="gp">$ </span>git checkout -b &lt;name-of-branch&gt;
</pre></div>
</div>
<p>Develop your new code and keep while keeping track of the status and differences using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git status
<span class="gp">$ </span>git diff
</pre></div>
</div>
<p>Add and commit local changes, use clear commit messages and add the number of the
related issue to that (first) commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git add &lt;file-name OR folder-name&gt;
<span class="gp">$ </span>git commit -m <span class="s2">&quot;this is my commit message. Ref #xxx&quot;</span>
</pre></div>
</div>
<p>Regularly push local commits to the repository. For a new branch the remote and name
of branch need to be added.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git push &lt;remote&gt; &lt;name-of-branch&gt;
</pre></div>
</div>
<p>When your changes are ready for review, you can merge them into the main codebase with a
merge request. We recommend creating a merge request as early as possible to give other
developers a heads up and to provide an opportunity for valuable early feedback. You
can create a merge request online or by pushing your branch to a feature-branch.</p>
</section>
<section id="code-conventions">
<h2>Code Conventions<a class="headerlink" href="#code-conventions" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="https://black.readthedocs.io/en/stable/">black</a> for standardized code formatting.</p>
<p>Tests are mandatory for new features. We use <a class="reference external" href="https://pytest.org">pytest</a>. All tests
should go in the tests directory.</p>
<p>During Continuous Integration testing, several tools will be run to check your code for
based on pytest, but also stylistic errors.</p>
</section>
<section id="development-environment">
<h2>Development Environment<a class="headerlink" href="#development-environment" title="Permalink to this headline">¶</a></h2>
<p>Developing HydroMT requires Python &gt;= 3.6. We prefer developing with the most recent
version of Python. We strongly encourage you to develop in a seperate conda environment.
All Python dependencies required to develop HydroMT can be found in <a class="reference external" href="environment.yml">environment.yml</a>.</p>
<section id="initial-setup">
<h3>Initial Setup<a class="headerlink" href="#initial-setup" title="Permalink to this headline">¶</a></h3>
<p>First, clone HydroMT’s <code class="docutils literal notranslate"><span class="pre">git</span></code> repo and navigate into the repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git https://github.com/Deltares/hydromt.git
<span class="gp">$ </span><span class="nb">cd</span> hydromt
</pre></div>
</div>
<p>Then, make and activate a new hydromt conda environment based on the environment.yml
file contained in the repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda env create -f environment.yml
<span class="gp">$ </span>conda activate hydromt
</pre></div>
</div>
<p>Finally, build and install hydromt:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -e .
</pre></div>
</div>
</section>
<section id="running-the-tests">
<h3>Running the tests<a class="headerlink" href="#running-the-tests" title="Permalink to this headline">¶</a></h3>
<p>HydroMT’s tests live in the tests folder and generally match the main package layout.
Test should be run from the tests folder.</p>
<p>To run the entire suite and the code coverage report:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> tests
<span class="gp">$ </span>python -m pytest --verbose --cov<span class="o">=</span>hydromt --cov-report term-missing
</pre></div>
</div>
<p>A single test file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pytest --verbose test_rio.py
</pre></div>
</div>
<p>A single test:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m pytest --verbose test_rio.py::test_object
</pre></div>
</div>
</section>
<section id="running-code-format-checks">
<h3>Running code format checks<a class="headerlink" href="#running-code-format-checks" title="Permalink to this headline">¶</a></h3>
<p>The code formatting will be checked based on the <a class="reference external" href="https://black.readthedocs.io/en/stable/the_black_code_style.html">black clode style</a> during ci.
Make sure the check below returns <em>All done!</em> before commiting your edits.</p>
<p>To check the formatting of your code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black --check .
</pre></div>
</div>
<p>To automatically reformat your code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>black .
</pre></div>
</div>
</section>
<section id="creating-a-release">
<h3>Creating a release<a class="headerlink" href="#creating-a-release" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Prepare the release by bumping the version number in the __init__.py and updating the docs/changelog.rst file</p></li>
<li><p>First create a new release on github under <a class="reference external" href="https://github.com/Deltares/hydromt/releases">https://github.com/Deltares/hydromt/releases</a>. We use semantic versioning and describe the release based on the CHANGELOG.</p></li>
<li><p>Make sure to update and clean your local git folder. This remmoves all files which are not tracked by git.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git pull
<span class="gp">$ </span>git clean -xfd
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Build wheels and sdist for the package and check the resulting files in the dist/ directory.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>flit build
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Then use publish to pypi. It will prompt you for your username and password.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>flit publish --repository pypi
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Bump the version number in __init__.py to the next release number with “.dev” postfix and push commit</p></li>
</ol>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../changelog.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">What’s new</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="roadmap.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Roadmap</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright Deltares.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>